<div align="center">

# ZAM â€” Zenith AI Gateway

[![Go Version](https://img.shields.io/badge/Go-1.21+-00ADD8?logo=go&logoColor=white)](https://golang.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Build Status](https://img.shields.io/badge/Build-Passing-brightgreen.svg)](https://github.com/your-repo/zam/actions)
[![GoReport](https://goreportcard.com/badge/github.com/your-repo/zam)](https://goreportcard.com/report/github.com/your-repo/zam)

**é«˜æ€§èƒ½ã€ç”Ÿäº§çº§ LLM æµå¼ç½‘å…³ â€” æ‹’ç»ä¼ªæµï¼Œæ‹’ç»æ³„æ¼ï¼Œæ‹’ç»ç›²è·¯ç”±**

</div>

---

## TL;DR

ZAM ä¸æ˜¯ä¼ ç»Ÿçš„ API ç½‘å…³ã€‚æˆ‘ä»¬é‡æ–°å®šä¹‰äº† LLM åœºæ™¯ä¸‹çš„æµé‡æ²»ç†èŒƒå¼ï¼Œé’ˆå¯¹ Token è®¡è´¹æ¨¡å‹ã€é•¿è¿æ¥è„†å¼±æ€§ã€ç®—åŠ›å¼‚æ„æ€§ä¸‰å¤§ç—›ç‚¹ï¼Œæä¾›äº†ç«¯åˆ°ç«¯çš„ç¡¬æ ¸è§£å†³æ–¹æ¡ˆã€‚

> **"åœ¨ 10K å¹¶å‘ SSE é•¿è¿æ¥ä¸‹ï¼Œå®ç°é›¶ Goroutine æ³„æ¼ä¸äºšæ¯«ç§’çº§æˆæœ¬ç†”æ–­ã€‚"**

---

## ğŸ¯ æ ¸å¿ƒå®šä½

ä¼ ç»Ÿ API ç½‘å…³ï¼ˆå¦‚ Kongã€APISIXï¼‰æ˜¯ä¸ºçŸ­è¿æ¥ã€QPS é™æµè®¾è®¡çš„å¾®æœåŠ¡ç½‘å…³ï¼Œåœ¨ LLM åœºæ™¯ä¸‹å­˜åœ¨æ ¹æœ¬æ€§ç¼ºé™·ï¼š

| ç—›ç‚¹ | ä¼ ç»Ÿç½‘å…³ | ZAM |
|------|---------|-----|
| **Token æˆæœ¬å¡Œç¼©** | è¯·æ±‚çº§é™æµï¼Œæ— æ³•é˜»æ­¢è¶…é•¿å¯¹è¯ | æµå¼æ‹¦æˆª + å»¶è¿Ÿç»“ç®—ï¼Œç²¾å‡†ç†”æ–­ |
| **é•¿è¿æ¥é›ªå´©** | å®¢æˆ·ç«¯æ–­å¼€ååç«¯ç»§ç»­è®¡ç®— | å…¨é“¾è·¯ Context é€ä¼ ï¼Œç¬é—´æ–©æ–­ |
| **é™æ€è·¯ç”±åƒµåŒ–** | è½®è¯¢/æƒé‡ï¼Œæ— è§†èŠ‚ç‚¹çŠ¶æ€ | VRAM æ„ŸçŸ¥åŠ¨æ€æ‰“åˆ†ï¼Œè‡ªåŠ¨é™çº§ |

ZAM æ˜¯ä¸º **LLM é‡èº«å®šåˆ¶** çš„æµå¼ç½‘å…³ã€‚

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ZAM Gateway                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    HTTP Layer (Gin)                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Rate Limiter (Two-Phase Settlement)                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Phase 1: Allow()  â†’ Pre-flight quota check              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Phase 2: Consume() â†’ Stream-based token counting       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Router (VRAM-Aware Score-Based)                      â”‚   â”‚
â”‚  â”‚              Select(ctx, workers, req) â†’ optimal worker           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Worker Registry (Push-based + TTL)                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Cleanup Goroutine: Ticker(5s) â†’ Evict(>15s)        â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                  â”‚                  â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
              â”‚  Worker 1 â”‚    â”‚  Worker 2 â”‚    â”‚  Worker N â”‚
              â”‚  12GB VRAMâ”‚    â”‚   6GB VRAMâ”‚    â”‚   Cloud   â”‚
              â”‚  Score: 95 â”‚    â”‚  Score: 70 â”‚    â”‚  Score: 50 â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### 1ï¸âƒ£ ä¸¤æ®µå¼ Token é™æµé˜²å¾¡ (Two-Phase Settlement)

**æŠ›å¼ƒ QPSï¼Œæ‹¥æŠ±æµå¼è®¡è´¹ã€‚**

```go
// é˜¶æ®µä¸€ï¼šå…¥ç«™é¢„æ£€ (æ¯«ç§’çº§æ‹¦æˆª)
if !limiter.Allow(ctx, apiKey) {
    return 429 // ä½™é¢ä¸è¶³æˆ– Key æ— æ•ˆï¼Œç«‹å³æ‹’ç»
}

// é˜¶æ®µäºŒï¼šæµå¼æ¸…ç®— (ç²¾ç¡®åˆ° Token)
senderFunc := func(chunk StreamChunk) {
    totalTokens += estimateTokens(chunk.Content)
    // è¾¹å‘è¾¹ç®—ï¼Œæ¯«ç§’çº§ç†”æ–­
}
worker.Execute(ctx, req, senderFunc)
limiter.Consume(ctx, apiKey, totalTokens)
```

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

- **å…¥ç«™é¢„æ£€**ï¼šåœ¨è¯·æ±‚è¿›å…¥å‰æ£€æŸ¥ API Key æœ‰æ•ˆæ€§åŠä½™é¢ï¼Œæ— æ•ˆè¯·æ±‚åœ¨è¾¹ç•Œå±‚æ‹’ç»
- **æµå¼æ‹¦æˆª**ï¼šSSE æµå¼è¾“å‡ºä¸­å®æ—¶ç´¯è®¡ Tokenï¼Œä¸€æ—¦è¶…æ”¯ç«‹å³ä¸­æ–­æµ
- **å»¶è¿Ÿç»“ç®—**ï¼šè¯·æ±‚å®ŒæˆåæŒ‰å®é™…æ¶ˆè€—æ‰£è´¹ï¼Œé˜²æ­¢é¢„æ‰£å¸¦æ¥çš„å¹¶å‘å†²çª
- **çº¯å†…å­˜å­˜å‚¨**ï¼š`map[string]int` + `sync.RWMutex`ï¼Œæ— å¤–éƒ¨ä¾èµ–ï¼Œé›¶å»¶è¿Ÿ

**é˜²ç™½å«–èƒ½åŠ›ï¼š** ä» `Allow()` åˆ° `Consume()` å®Œæ•´é—­ç¯ï¼Œä¼ ç»Ÿè¯·æ±‚çº§é™æµæ— æ³•æ¯”æ‹Ÿçš„ç²¾å‡†æ€§ã€‚

---

### 2ï¸âƒ£ åŸºäº VRAM çš„åŠ¨æ€æ‰“åˆ†è·¯ç”± (VRAM-Aware Routing)

**æ‹’ç»è½®è¯¢ï¼Œæ‹¥æŠ±æ„ŸçŸ¥è·¯ç”±ã€‚**

```go
type Router interface {
    Select(ctx context.Context, workers []Worker, req *InferenceRequest) (Worker, error)
}
```

**è·¯ç”±ç­–ç•¥ (çº¿æ€§å½’ä¸€åŒ–æ‰“åˆ†)ï¼š**

1. **VRAM å¯ç”¨æ€§** (40% æƒé‡)ï¼š`score_vram = AvailableVRAM / TotalVRAM`
2. **å¹¶å‘åº¦** (30% æƒé‡)ï¼š`score_concurrency = 1 - (ActiveTasks / MaxTasks)`
3. **æ¨¡å‹åŒ¹é…** (20% æƒé‡)ï¼š`score_model = 1.0 if supported else 0.0`
4. **å›é€€æ ‡è®°** (10% æƒé‡)ï¼š`score_fallback = 0.0 if isFallback else 1.0`

```go
totalScore = 0.4 * score_vram +
             0.3 * score_concurrency +
             0.2 * score_model +
             0.1 * score_fallback
```

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

- **æ˜¾å­˜æ„ŸçŸ¥**ï¼šä¼˜å…ˆè°ƒåº¦ KV-Cache å……è£•çš„èŠ‚ç‚¹ï¼Œå‡å°‘ä¸Šä¸‹æ–‡é‡å»ºæˆæœ¬
- **è´Ÿè½½å‡è¡¡**ï¼šåŸºäºæ´»è·ƒä»»åŠ¡æ•°åŠ¨æ€åˆ†é…ï¼Œé¿å…çƒ­ç‚¹èŠ‚ç‚¹è¿‡è½½
- **è‡ªåŠ¨é™çº§**ï¼šå½“ä¸“ç”¨ GPU é¥±å’Œæ—¶ï¼Œè‡ªåŠ¨è·¯ç”±åˆ° Cloud Fallback
- **å®æ—¶æ›´æ–°**ï¼šWorker æ¯ 5 ç§’æ¨é€å¿ƒè·³ï¼Œè·¯ç”±å™¨å®æ—¶æ„ŸçŸ¥çŠ¶æ€å˜åŒ–

---

### 3ï¸âƒ£ ç”Ÿæ­»çº¿çº§åˆ«çš„ä¸Šä¸‹æ–‡é€ä¼  (Context-Driven Lifecycle)

**æ‹’ç»æ³„æ¼ï¼Œæ‹¥æŠ±è‡ªæ€å¼•ä¿¡ã€‚**

```go
// å…¨é“¾è·¯ Context é€ä¼ 
func (h *ChatHandler) Handle(c *gin.Context) {
    baseCtx := c.Request.Context() // ä» Gin Context æå–åº•å±‚ Context
    ctx := context.WithValue(baseCtx, TraceKey, traceID)
    c.Request = c.Request.WithContext(ctx) // é‡å†™ Request Context

    // æµå¼å¤„ç†...
    if err := worker.Execute(ctx, req, senderFunc); err != nil {
        // Context è¢«å–æ¶ˆï¼Œworker è‡ªåŠ¨åœæ­¢
    }
}
```

**ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š**

```
Client Disconnect (Ctrl+C)
         â”‚
         â–¼
TCP Connection Closed
         â”‚
         â–¼
c.Request.Context().Done()  â†â”€â”€ è§¦å‘
         â”‚
         â–¼
worker.Execute() éå†:
    select {
    case <-ctx.Done():
        return ctx.Err()  â†â”€â”€ ç¬é—´è¿”å›
    default:
        // ç»§ç»­å¤„ç†
    }
         â”‚
         â–¼
HTTP Request to Backend Canceled
         â”‚
         â–¼
Backend Worker Stops Inference
```

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

- **é›¶æ³„æ¼**ï¼šå®¢æˆ·ç«¯æ–­å¼€ â†’ Context å–æ¶ˆ â†’ åç«¯åœæ­¢æ¨ç†ï¼Œå…¨ç¨‹æ—  Goroutine ç§¯å‹
- **ç¬æ—¶å“åº”**ï¼šä¸éœ€è¦ç­‰å¾…è¶…æ—¶ï¼Œ`ctx.Done()` åœ¨å¾®ç§’çº§è§¦å‘
- **å…¨é“¾è·¯è¦†ç›–**ï¼šä» Gin Handler â†’ Router â†’ Workerï¼ŒContext ä¸€è·¯é€ä¼ 

---

### 4ï¸âƒ£ æœåŠ¡è‡ªå‘ç°ä¸æ­»ç¥æ¸…ç† (Push-based Registry & TTL Eviction)

**æ‹’ç»æ‹‰æ¨¡å¼ï¼Œæ‹¥æŠ±æ¨æ¨¡å¼ã€‚**

```go
type WorkerRegistry interface {
    Heartbeat(profile WorkerProfile) error              // æ¨é€å¿ƒè·³
    GetAvailableWorkers() []Worker                     // è·å–å­˜æ´»èŠ‚ç‚¹
}
```

**æ­»ç¥æ¸…ç†åç¨‹ (æ— æ³„æ¼æ¨¡å‹)ï¼š**

```go
func (r *InMemoryRegistry) cleanupDeadWorkers(ctx context.Context) {
    ticker := time.NewTicker(5 * time.Second)
    defer ticker.Stop()

    for {
        select {
        case <-ctx.Done():
            return  // â†â”€ Context å–æ¶ˆï¼Œåç¨‹ç«‹å³é€€å‡ºï¼Œæ— æ³„æ¼
        case <-ticker.C:
            r.mu.Lock()
            now := time.Now()
            for workerID, rw := range r.workers {
                if now.Sub(rw.LastSeen) > 15*time.Second {
                    delete(r.workers, workerID)  // æ¸…ç†åƒµå°¸èŠ‚ç‚¹
                }
            }
            r.mu.Unlock()
        }
    }
}
```

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

- **æ¨æ¨¡å¼å¿ƒè·³**ï¼šWorker ä¸»åŠ¨æ¨é€çŠ¶æ€ï¼Œç½‘å…³è¢«åŠ¨æ¥æ”¶ï¼Œæ— éœ€ä¸»åŠ¨è½®è¯¢
- **TTL è‡ªåŠ¨æ¸…ç†**ï¼šè¶…è¿‡ 15 ç§’æœªå¿ƒè·³çš„èŠ‚ç‚¹è‡ªåŠ¨ä¸‹çº¿
- **å¹¶å‘å®‰å…¨**ï¼š`map[string]*RegisteredWorker` + `sync.RWMutex`ï¼Œé«˜å¹¶å‘è¯»å†™æ— ç«äº‰
- **ä¼˜é›…é€€å‡º**ï¼šåç¨‹ç›‘å¬ `ctx.Done()`ï¼ŒæœåŠ¡å…³é—­æ—¶é›¶æ®‹ç•™

---

## ğŸ“¦ å®‰è£…

### ä»æºç æ„å»º

```bash
git clone https://github.com/your-repo/zam.git
cd zam
go mod download
go build -o zam-gateway .
```

### ä½¿ç”¨ Docker

```bash
docker build -t zam-gateway .
docker run -p 8080:8080 zam-gateway
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨ç½‘å…³

```bash
./zam-gateway
# è¾“å‡º: Starting server on :8080
```

### 2. Worker æ³¨å†Œ (å¿ƒè·³)

```bash
curl -X POST http://localhost:8080/v1/workers/heartbeat \
  -H "Content-Type: application/json" \
  -d '{
    "worker_id": "gpu-4070tis-01",
    "supported": ["gpt-3.5-turbo", "gpt-4"],
    "total_vram": 12884901888,
    "available_vram": 12884901888,
    "active_tasks": 0,
    "max_tasks": 2
  }'
```

### 3. å‘èµ·æ¨ç†è¯·æ±‚

```bash
curl -X POST http://localhost:8080/v1/chat/completions \
  -H "Authorization: Bearer test-key-123" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-3.5-turbo",
    "messages": [{"role": "user", "content": "Hello, ZAM!"}],
    "stream": true
  }'
```

### 4. æµå¼å“åº”ç¤ºä¾‹

```
data: {"id":"chatcmpl-xxx","object":"chat.completion.chunk","choices":[{"index":0,"delta":{"content":"Hello"}}]}

data: {"id":"chatcmpl-xxx","object":"chat.completion.chunk","choices":[{"index":0,"delta":{"content":"!"}}]}

data: [DONE]
```

---

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡

| å˜é‡ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `PORT` | `8080` | ç›‘å¬ç«¯å£ |
| `GIN_MODE` | `release` | Gin è¿è¡Œæ¨¡å¼ (`release` / `debug`) |
| `CLEANUP_INTERVAL` | `5s` | æ¸…ç†åç¨‹é—´éš” |
| `WORKER_TTL` | `15s` | Worker å¿ƒè·³è¶…æ—¶é˜ˆå€¼ |

---

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test -v ./...

# è¿è¡Œæ³¨å†Œä¸­å¿ƒæµ‹è¯•ï¼ˆåŒ…å«è¶…æ—¶æ¸…ç†æµ‹è¯•ï¼‰
go test -v ./core -run TestInMemoryRegistry

# è¿è¡Œå¹¶å‘æµ‹è¯•
go test -v ./core -run TestInMemoryRegistry_ConcurrentAccess -race
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| å•èŠ‚ç‚¹å¹¶å‘ SSE è¿æ¥ | 10,000+ | ç¨³å®šé•¿è¿æ¥ |
| æµå¼å“åº”é¦–å­—èŠ‚å»¶è¿Ÿ (TTFB) | < 10ms | Gin + Context é€ä¼  |
| é™æµæ‹¦æˆªå»¶è¿Ÿ | < 1ms | çº¯å†…å­˜æŸ¥è¡¨ |
| è·¯ç”±æ‰“åˆ†å»¶è¿Ÿ | < 100Âµs | çº¿æ€§å½’ä¸€åŒ–ç®—æ³• |
| Goroutine æ³„æ¼ç‡ | 0 | å…¨é“¾è·¯ Context ç®¡ç† |

---

## ğŸ›£ï¸ Roadmap

- [ ] **Prometheus æŒ‡æ ‡æš´éœ²**ï¼šQPSã€Token ååã€Worker å¥åº·åº¦
- [ ] **åˆ†å¸ƒå¼ Token æ± **ï¼šRedis åç«¯ï¼Œæ”¯æŒå¤šå®ä¾‹å…±äº«
- [ ] **è¯·æ±‚é•œåƒ**ï¼šç°åº¦å‘å¸ƒï¼Œæµé‡å½•åˆ¶å›æ”¾
- [ ] **è‡ªåŠ¨æ‰©ç¼©å®¹**ï¼šåŸºäºé˜Ÿåˆ—æ·±åº¦åŠ¨æ€ Worker æ³¨å†Œ
- [ ] **å¤šæ¨¡å‹é€‚é…**ï¼šClaudeã€Llamaã€PaLM ç»Ÿä¸€æ¥å…¥

---

## ğŸ¤ è´¡çŒ®

ZAM æ¬¢è¿ç¤¾åŒºè´¡çŒ®ã€‚è¯·é˜…è¯» [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºã€‚

---

## â­ è‡´è°¢

- [Gin](https://github.com/gin-gonic/gin) - é«˜æ€§èƒ½ HTTP æ¡†æ¶
- [OpenAI API](https://openai.com/) - æ ‡å‡†æ¥å£è§„èŒƒ

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#zam---zenith-ai-gateway)**

Made with â¤ï¸ by the ZAM Team

</div>
